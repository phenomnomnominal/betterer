<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/betterer/blog/rss.xml" title="Betterer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/betterer/blog/atom.xml" title="Betterer Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-35865678-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Betterer" href="/betterer/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:wght@300|Roboto+Mono">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico&text=Betterer"><title data-react-helmet="true">Betterer v1.0.0 â˜€ï¸ | Betterer</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://phenomnomnominal.github.io/betterer/img/betterer.png"><meta data-react-helmet="true" name="twitter:image" content="https://phenomnomnominal.github.io/betterer/img/betterer.png"><meta data-react-helmet="true" property="og:url" content="https://phenomnomnominal.github.io/betterer/blog/2020/05/14/betterer-v1.0.0"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Betterer v1.0.0 â˜€ï¸ | Betterer"><meta data-react-helmet="true" name="description" content="I&#x27;m stoked to announce v1.0.0 of Betterer!"><meta data-react-helmet="true" property="og:description" content="I&#x27;m stoked to announce v1.0.0 of Betterer!"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-05-14T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="http://twitter.com/phenomnominal"><link data-react-helmet="true" rel="shortcut icon" href="/betterer/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://phenomnomnominal.github.io/betterer/blog/2020/05/14/betterer-v1.0.0"><link data-react-helmet="true" rel="alternate" href="https://phenomnomnominal.github.io/betterer/blog/2020/05/14/betterer-v1.0.0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://phenomnomnominal.github.io/betterer/blog/2020/05/14/betterer-v1.0.0" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/betterer/assets/css/styles.79a10abc.css">
<link rel="preload" href="/betterer/assets/js/runtime~main.50119969.js" as="script">
<link rel="preload" href="/betterer/assets/js/main.a8c9fb9d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/betterer/"><div class="navbar__logo"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Betterer</b></a><a class="navbar__item navbar__link" href="/betterer/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/betterer/docs/index">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/betterer/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/betterer/blog/2021/11/13/betterer-v5.0.0">Betterer v5.0.0 â˜€ï¸</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/betterer/blog/2021/03/01/betterer-and-stylelint">Incrementally adding Stylelint rules with Betterer â˜€ï¸</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/betterer/blog/2020/05/15/improving-accessibility-with-betterer">Improving accessibility with Betterer â˜€ï¸</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/betterer/blog/2020/05/14/betterer-v1.0.0">Betterer v1.0.0 â˜€ï¸</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Betterer v1.0.0 â˜€ï¸</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2020-05-14T00:00:00.000Z" itemprop="datePublished">May 14, 2020</time> Â· <!-- -->8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="http://twitter.com/phenomnominal" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Craig Spence</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>I&#x27;m stoked to announce <a href="https://www.npmjs.com/org/betterer" target="_blank" rel="noopener noreferrer">v1.0.0</a> of <a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong>!</a></p><p>I&#x27;ve been locked down in New Zealand for the last little while, and I&#x27;ve used some of that time to smash out what I think is a pretty compelling v1 release of a tool that I&#x27;m really excited about!</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="what-is-betterer">What is <strong>Betterer</strong>?<a aria-hidden="true" class="hash-link" href="#what-is-betterer" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong></a> is a test runner that helps make incremental improvements to your code! It is based upon <a href="https://jestjs.io/docs/en/snapshot-testing" target="_blank" rel="noopener noreferrer"><strong>Jest</strong>&#x27;s snapshot testing</a>, but with a twist...</p><p>I&#x27;m sure many of us have been in situations where we&#x27;ve seen big changes we&#x27;d like to make, or new standards or design decisions that we&#x27;d like to encourage, but we just don&#x27;t have the time to do it.</p><p>Usually one of two things happen:</p><ol><li><p>You start a long-lived branch that is awful to maintain and often impossible to merge. It ends up being a time sink â±</p></li><li><p>You and your team make an agreement to make the improvement over time. It gets forgotten about and nothing gets better (in fact usually it gets worse!) ğŸ˜•</p></li></ol><p>I&#x27;ve seen this happen time and time and again! Sometimes it&#x27;s introducing a new style rule to a codebase. Other times it&#x27;s enabling stricter compilation, or decreasing the number of accessibility failures!</p><p><strong>Betterer</strong> works in two stages. The first time it runs a test, it will take a snapshot of the current state. From that point on, whenever it runs it will compare against that snapshot. It will either throw an error (if the test got worse âŒ), or update the snapshot (if the test got better âœ…). That&#x27;s pretty much it!</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="how-does-it-work">How does it work?<a aria-hidden="true" class="hash-link" href="#how-does-it-work" title="Direct link to heading">â€‹</a></h2><p>To get started, you can run the following from the root of your project:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx @betterer/cli init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>That will give you a brand new <code>.betterer.ts</code> config file which looks something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// .betterer.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Add tests here â˜€ï¸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>From here, it&#x27;s up to you to add some tests!</p><p>Let&#x27;s imagine you&#x27;re working with a codebase that uses <a href="https://momentjs.com/" target="_blank" rel="noopener noreferrer"><strong>Moment.js</strong></a>. You&#x27;d like to migrate away from it for performance reasons.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/subtract.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports operator">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token imports"> moment</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">moment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">subtract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;years&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s also imagine that you&#x27;re using <strong>ESLint</strong> in this codebase. One approach to remove <strong>Moment.js</strong> might be to use <a href="https://eslint.org/docs/rules/no-restricted-imports" target="_blank" rel="noopener noreferrer">the <code>no-restricted-imports</code> <strong>ESLint</strong> rule</a>, add the <code>eslint-disable-next-line</code> comment all over the place, and cross your fingers that people don&#x27;t just add more... ğŸ¤”</p><p>Betterer gives us a better option! We can create a test for that specific rule:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// .betterer.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> eslintBetterer </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@betterer/eslint&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;no import from moment&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">eslintBetterer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./src/**/*.js&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;no-restricted-imports&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        message</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Please use &quot;date-fns&quot; instead.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The first time we run the test with <strong>Betterer</strong>, it will look something like this:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/first-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run for the first time" title="First run"></p><p><strong>Betterer</strong> has now created a snapshot of the current state, stored by default in a <code>.betterer.results</code> file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// BETTERER RESULTS V1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">no import from moment</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  timestamp</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1589459511808</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    &quot;src/subtract.js:566118541&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">      [0, 0, 33, &quot;\&#x27;moment\&#x27; import is restricted from being used. Please use \\&quot;date-fns\\&quot; instead.&quot;, &quot;4035178381&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  }</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snapshot contains information about the current issues in the code.</p><p>The next time we run the test, it will look like this:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/same-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and stayed the same" title="Same run"></p><p>Now, someone else on the team comes along and doesn&#x27;t know about the new rule, and they add a new file that uses <strong>Moment.js</strong>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/add.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports operator">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token imports"> moment</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">moment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;years&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When <strong>Betterer</strong> runs on their code, they get a nice big error:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/worse-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and got worse" title="Worse run"></p><p>Even though a new issue has been introduced, the <code>.betterer.results</code> file doesn&#x27;t change!</p><p>Our teammate reads the helpful error message from <strong>ESLint</strong> and they update their code to use <strong>date-fns</strong>...</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/add.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> addYears </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;date-fns&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">addYears</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>... and once again <strong>Betterer</strong> tells them that the result is the same:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/same-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and stayed the same" title="Same run"></p><p>Our teammate has a bit of time on their hands, so they decide to fix up our usage of <strong>Moment.js</strong> as well! ğŸ‰</p><p>This time when they run <strong>Betterer</strong>, everything is good:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/better-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and got better" title="Better run"></p><p>There are now no remaining issues, so this test has met its goal. Since the existing issue has been resolved, it is removed from the snapshot in the <code>.betterer.results</code> file. This means we can move the rule from <strong>Betterer</strong> over to the normal <strong>ESLint</strong> configuration, so we don&#x27;t reintroduce the issues again.</p><p>Pretty neat eh! That&#x27;s an example of the built-in <code>@betterer/eslint</code> test, but there are <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/typescript" target="_blank" rel="noopener noreferrer">other</a> <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/regexp" target="_blank" rel="noopener noreferrer">built-in</a> <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/tsquery" target="_blank" rel="noopener noreferrer">tests</a> too. And you can of course write your own tests! Check out the <a href="https://github.com/phenomnomnominal/betterer#custom-tests" target="_blank" rel="noopener noreferrer">documentation for more details</a> (still a WIP ğŸš§)!</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="whats-in-v100">What&#x27;s in v1.0.0?<a aria-hidden="true" class="hash-link" href="#whats-in-v100" title="Direct link to heading">â€‹</a></h2><p>Everything I&#x27;ve mentioned so far has been working for a while! Over the last few months I&#x27;ve really solidified the implementation (basically a whole rewrite to be honest!):</p><ul><li>Better error handling and error messages</li><li>Better issue comparison. It now understands file renames and issues that around within the same file</li><li>The ability to run tests on a single file via the JS API, with <code>betterer.single</code></li><li>A whole bunch more tests!</li></ul><p>But I&#x27;ve also added a few key features that are worthy of a 1.0.0 release! ğŸ”¥ğŸ”¥ğŸ”¥</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="force-update-">Force Update (!)<a aria-hidden="true" class="hash-link" href="#force-update-" title="Direct link to heading">â€‹</a></h3><p>First things first, you can now run <strong>Betterer</strong> with the <code>--update</code> option, and the snapshot will be updated even if it got worse! This is handy for when you need to ship something, even if it makes it temporarily worse:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#000000"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">betterer --update</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And because this is shamelessly stolen from Jest, you can also use <code>-u</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="watch-mode-">Watch mode (!!!)<a aria-hidden="true" class="hash-link" href="#watch-mode-" title="Direct link to heading">â€‹</a></h3><p>This one is huge! All the changes that I made were building up to this. You can now run <strong>Betterer</strong> in watch mode and get feedback as you fix up issues:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/z47lyc7qmtnnxov4ggra.gif" alt="Terminal output showing Betterer running in watch mode indicating that the &quot;no import from moment&quot; test has run on a specific file and got better" title="Watch mode"></p><p>Same rules apply here, the snapshot will update whenever the test gets better!</p><p>There&#x27;s a bunch of other cool things that could happen with watch mode (gamification much?), so I&#x27;m pumped that it&#x27;s working! ğŸ¤©</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="vs-code-extension-">VS Code extension (!!!!!)<a aria-hidden="true" class="hash-link" href="#vs-code-extension-" title="Direct link to heading">â€‹</a></h3><p>Way to bury the lede! This is probably the coolest bit! Let&#x27;s just say it was a build up.</p><p><strong>Betterer</strong> runs entirely in its own world, so the usual <strong>ESLint</strong> or <strong>TypeScript</strong> extensions can&#x27;t report the issues. But everyone loves seeing red squiggly lines in the code editor, so <strong>Betterer</strong> now has <a href="https://marketplace.visualstudio.com/items?itemName=Betterer.betterer-vscode" target="_blank" rel="noopener noreferrer">its very own VS Code Extension</a> ğŸ¤¯!</p><h4 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="initialise-in-a-new-project">Initialise in a new project<a aria-hidden="true" class="hash-link" href="#initialise-in-a-new-project" title="Direct link to heading">â€‹</a></h4><p>You can run the <code>betterer.init</code> command in a project! It will generate config files and update your <code>package.json</code> with scripts and dependencies:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7ij09ag7q2v12pv56h5x.gif" alt="VS Code screen capture output showing Betterer being initialised in a project" title="VS Code Extension Betterer init"></p><h4 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="see-all-issues-in-a-file">See all issues in a file<a aria-hidden="true" class="hash-link" href="#see-all-issues-in-a-file" title="Direct link to heading">â€‹</a></h4><p>And when you&#x27;ve got some tests setup, it will show you all the existing issues in a file, and when they were first created. And it will show you any new issues as you make them:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uxmtcar93enfqgx12orr.gif" alt="VS Code screen capture output showing Betterer highlighting issues in a project" title="VS Code Extension Betterer issues"></p><p>I reckon that&#x27;s pretty sweet!</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="so-whats-next">So, what&#x27;s next?<a aria-hidden="true" class="hash-link" href="#so-whats-next" title="Direct link to heading">â€‹</a></h3><p>Well, you&#x27;re going to try out <a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong></a> and open lots of issues and help me make it better(er)! If you&#x27;d like to contribute...</p><ul><li>There are <em>definitely</em> bugs to fix</li><li>The test coverage is pretty good, but there aren&#x27;t any E2E tests for the VS Code extension yet</li><li>The logging and reporting implementation could use some work</li><li>There is so much documentation to be written</li></ul><p>What a time to be alive! ğŸ¤“</p><p>In case you can&#x27;t tell, I&#x27;m unreasonably excited about this and I really think this will help with large and legacy codebases. Please let me know what you think on the <a href="https://twitter.com/phenomnominal" target="_blank" rel="noopener noreferrer">Twitters</a>!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/betterer/blog/2020/05/15/improving-accessibility-with-betterer"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->Improving accessibility with Betterer â˜€ï¸</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-betterer" class="table-of-contents__link toc-highlight">What is <strong>Betterer</strong>?</a></li><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How does it work?</a></li><li><a href="#whats-in-v100" class="table-of-contents__link toc-highlight">What&#39;s in v1.0.0?</a><ul><li><a href="#force-update-" class="table-of-contents__link toc-highlight">Force Update (!)</a></li><li><a href="#watch-mode-" class="table-of-contents__link toc-highlight">Watch mode (!!!)</a></li><li><a href="#vs-code-extension-" class="table-of-contents__link toc-highlight">VS Code extension (!!!!!)</a></li><li><a href="#so-whats-next" class="table-of-contents__link toc-highlight">So, what&#39;s next?</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/introduction">Betterer</a></li><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/installation">Get started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/phenomnomnominal/betterer/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Report an issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/betterer" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/YNgtXt6QVX" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/phenomnominal" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/index">API</a></li><li class="footer__item"><a class="footer__link-item" href="/betterer/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://marketplace.visualstudio.com/items?itemName=Betterer.betterer-vscode" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>VS Code extension<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2022 Craig Spence</div></div></div></footer></div>
<script src="/betterer/assets/js/runtime~main.50119969.js"></script>
<script src="/betterer/assets/js/main.a8c9fb9d.js"></script>
</body>
</html>